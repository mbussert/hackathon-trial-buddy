generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model messages {
  text           String
  author         String
  xata_updatedat DateTime @default(now()) @db.Timestamptz(6)
  xata_id        String   @unique(map: "_pgroll_users_xata_id_key") @default(dbgenerated("('rec_'::text || (xata_private.xid())::text)"))
  xata_version   Int      @default(0)
  xata_createdat DateTime @default(now()) @db.Timestamptz(6)
}

model users {
  id             String   @id @unique
  email          String   @unique
  first_name     String
  last_name      String
  clients        client[]
  xata_version   Int      @default(0)
  xata_createdat DateTime @default(now()) @db.Timestamptz(6)
  xata_updatedat DateTime @default(now()) @db.Timestamptz(6)
  xata_id        String   @unique(map: "users__pgroll_new_xata_id_key") @default(dbgenerated("('rec_'::text || (xata_private.xid())::text)"))
}

model cases {
  id             String        @id @unique @default(uuid())
  caseNumber     String
  createdAt      DateTime      @default(now()) @db.Timestamptz(6)
  fileHash       String
  fileUrl        String
  owner          String
  xata_id        String        @unique(map: "cases__pgroll_new_xata_id_key") @default(dbgenerated("('rec_'::text || (xata_private.xid())::text)"))
  xata_version   Int           @default(0)
  xata_createdat DateTime      @default(now()) @db.Timestamptz(6)
  xata_updatedat DateTime      @default(now()) @db.Timestamptz(6)
  summary        case_summary?
}

model case_summary {
  id                Int      @id @unique @default(autoincrement())
  analysis          String
  backgroundFacts   String
  authoringJudges   String[]
  caseNumber        String
  court             String
  plaintiffs        String[]
  defendants        String[]
  jurisdiction      String
  courtHoldings     String[]
  lowerCourtHolding String
  caseId            String   @unique
  xata_id           String   @unique(map: "case_summary__pgroll_new_xata_id_key") @default(dbgenerated("('rec_'::text || (xata_private.xid())::text)"))
  xata_version      Int      @default(0)
  xata_createdat    DateTime @default(now()) @db.Timestamptz(6)
  xata_updatedat    DateTime @default(now()) @db.Timestamptz(6)
  case              cases    @relation(fields: [caseId], references: [id])
}

model client {
  id             String   @id @unique @default(uuid())
  createdAt      DateTime @default(now()) @db.Timestamptz(6)
  updatedAt      DateTime @default(now()) @db.Timestamptz(6)
  first_name     String
  last_name      String
  email          String   @unique
  telephone      String
  attorney       users    @relation(fields: [attorneyId], references: [id])
  attorneyId     String
  xata_id        String   @unique(map: "clients__pgroll_new_xata_id_key") @default(dbgenerated("('rec_'::text || (xata_private.xid())::text)"))
  xata_version   Int      @default(0)
  xata_createdat DateTime @default(now()) @db.Timestamptz(6)
  xata_updatedat DateTime @default(now()) @db.Timestamptz(6)
}
